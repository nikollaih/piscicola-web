import{r as c,j as e,a as S,y as C}from"./app-DoPl5lFM.js";import{A as w}from"./AuthenticatedLayout-BAzWT1Pc.js";import{M as E}from"./Modal-CFwUKgA_.js";import y from"./Item-BNvx5DPb.js";import{P as B}from"./PrimaryButton-s6j7ElbD.js";import b from"./Add-Dp5DU_61.js";import{d as A}from"./Services-CsS_QnhK.js";import{S as n}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import"./SR-BoSPAYsv.js";import"./Dropdown-C-i2qCtQ.js";import"./transition-YMyy0hwJ.js";import"./TextInput-B2uDKCmh.js";import"./InputLabel-C-Tz_r5K.js";import"./InputError-ByfgtF5w.js";function H({auth:d,steps:m,csrfToken:p}){const[x,s]=c.useState(!1),[u,i]=c.useState({}),f=()=>m.map(r=>e.jsx(y,{step:r,onEdit:t=>{j(t)},onDelete:t=>{h(t)}})),h=r=>{const{name:t,id:o}=r;n.fire({title:"¿Estás seguro(a)?",text:`¿Deseas eliminar la etapa "${t}"?`,showCancelButton:!0,confirmButtonColor:"#dd2627",cancelButtonColor:"#1f2937",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&g(o)})},g=async r=>{try{const t=await A(route("step.delete",{stepId:r}),p),o=await t.json();if(t.ok)n.fire({title:"Exito",text:o.msg,icon:"success",confirmButtonText:"Continuar"}).then(a=>{a.isConfirmed&&C.reload()});else throw new Error(o.msg||"Failed to delete step.")}catch(t){n.fire({title:"Error",text:t.message||"An unexpected error occurred.",icon:"error"})}},j=r=>{i(r),s(!0)},l=()=>{i({}),s(!1)};return e.jsxs(w,{user:d.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Etapas"}),children:[e.jsx(S,{title:"Etapas"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx("div",{className:"flex mb-4 justify-end",children:e.jsx(B,{onClick:()=>{s(!0)},className:"bg-orange-600 h-10",children:"Agregar"})}),e.jsx("div",{className:"grid grid-cols-4 border border-dashed border-gray-200 rounded-lg gap-4 p-1",children:f()})]})}),e.jsx(E,{show:x,onClose:()=>{l()},children:e.jsx(b,{onClose:()=>{l()},step:u})})]})}export{H as default};
