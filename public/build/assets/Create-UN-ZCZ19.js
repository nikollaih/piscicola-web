import{r,q as w,W as U,j as e,a as k,d as q}from"./app-DoPl5lFM.js";import{A as B}from"./AuthenticatedLayout-BAzWT1Pc.js";import{T as c}from"./TextInput-B2uDKCmh.js";import{I as m}from"./InputLabel-C-Tz_r5K.js";import{D as d}from"./Dropdown-C-i2qCtQ.js";import{D as G,a as L}from"./DropDownItem-BiquOykW.js";import{P as v}from"./PrimaryButton-s6j7ElbD.js";import{I as i}from"./InputError-ByfgtF5w.js";import{A as W}from"./AlertMessage-CubBamYp.js";import"./SR-BoSPAYsv.js";import"./transition-YMyy0hwJ.js";function $({auth:N,usersUrl:b,roles:u}){var f,h;const x=r.useRef(null),a=w().props.errors,l=w().props,{data:t,setData:o,post:_,patch:C,reset:y,processing:D}=U({document:null,name:"",mobile_phone:null,email:"",role_id:2,password:"",password_confirmation:""}),[R,p]=r.useState("Manager"),[S,g]=r.useState("");r.useEffect(()=>{var s;(s=l==null?void 0:l.user)!=null&&s.id&&A(l.user)},[]);const A=s=>{o({document:s.document,name:s.name,mobile_phone:s.mobile_phone,email:s.email,role_id:s.role_id}),p(u.filter(n=>n.id===s.role_id).at(0).name)},I=s=>{var n;s.preventDefault(),(n=l==null?void 0:l.user)!=null&&n.id?C(l.formActionUrl,{onSuccess:()=>j()}):(console.log(t),_(l.formActionUrl,{onSuccess:()=>j()}))},j=()=>{var n;let s="modificado";(n=l==null?void 0:l.user)!=null&&n.id||(y(),s="agregado"),g("El usuario fue "+s+" satisfactoriamente"),x.current.click()},M=s=>{o({...t,role_id:s.id}),p(s.name)},T=()=>u.map(s=>e.jsx(L,{onClick:()=>{M(s)},children:s.name}));return e.jsxs(B,{user:N.user,header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:[(f=l==null?void 0:l.user)!=null&&f.id?"Modificar":"Agregar"," usuario"]}),children:[e.jsx(k,{title:"Dashboard"}),e.jsx("div",{className:"py-4 lg:py-12",children:e.jsx("form",{onSubmit:I,children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx(W,{title:S,onClose:()=>g("")}),e.jsxs("div",{class:"bg-white shadow-sm rounded-lg p-5",children:[e.jsxs("div",{className:"grid md:grid-cols-4 sm:grid-cols-1 gap-4 xs:grid-cols-1 mb-4",children:[e.jsxs("div",{className:"md:col-span-1 sm:col-span-4",children:[e.jsx(m,{value:"Rol"}),e.jsxs(d,{children:[e.jsx(d.Trigger,{children:e.jsx(G,{className:"items-center cursor-pointer",children:R})}),e.jsx(d.Content,{align:"left",className:"px-2",width:100,children:T()})]}),a!=null&&a.name?e.jsx(i,{message:a.role_id}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-4",children:[e.jsx(m,{value:"Documento"}),e.jsx(c,{type:"number",className:"w-full",placeholder:"123456789",name:"document",value:t.document,onChange:s=>o(s.target.name,s.target.value)}),a!=null&&a.document?e.jsx(i,{message:a.document}):""]}),e.jsxs("div",{className:"md:col-span-2 sm:col-span-4",children:[e.jsx(m,{value:"Nombre Completo"}),e.jsx(c,{type:"text",name:"name",className:"w-full",value:t.name,onChange:s=>o(s.target.name,s.target.value.toUpperCase())}),a!=null&&a.name?e.jsx(i,{message:a.name}):""]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 sm:grid-cols-1 gap-4 xs:grid-cols-1 mb-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(m,{value:"Celular"}),e.jsx(c,{type:"number",name:"mobile_phone",className:"w-full",placeholder:"123456789",value:t.mobile_phone,onChange:s=>o(s.target.name,s.target.value)}),a!=null&&a.mobile_phone?e.jsx(i,{message:a.mobile_phone}):""]}),e.jsxs("div",{className:"w-full",children:[e.jsx(m,{value:"Correo electr칩nico"}),e.jsx(c,{type:"email",name:"email",className:"w-full",placeholder:"johndoe@example.com",value:t.email,onChange:s=>o(s.target.name,s.target.value)}),a!=null&&a.email?e.jsx(i,{message:a.email}):""]})]}),(h=l==null?void 0:l.user)!=null&&h.id?null:e.jsxs("div",{className:"grid md:grid-cols-2 sm:grid-cols-1 gap-4 xs:grid-cols-1 mb-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(m,{value:"Contrase침a (Minimo 8 car치cteres)"}),e.jsx(c,{type:"password",name:"password",className:"w-full",placeholder:"********",value:t.password,onChange:s=>o(s.target.name,s.target.value)}),a!=null&&a.mobile_phone?e.jsx(i,{message:a.password}):""]}),e.jsxs("div",{className:"w-full",children:[e.jsx(m,{value:"Repetir contrase침a"}),e.jsx(c,{type:"password",name:"password_confirmation",className:"w-full",placeholder:"********",value:t.password_confirmation,onChange:s=>o(s.target.name,s.target.value)}),a!=null&&a.email?e.jsx(i,{message:a.password_confirmation}):""]})]})]}),e.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[e.jsx(q,{className:"w-full sm:w-auto",href:b,children:e.jsx(v,{className:"gray bg-gray-800 w-full sm:w-auto",children:"Regresar"})}),e.jsx(v,{className:"bg-orange-600 w-full sm:w-auto",disabled:D,children:"Guardar"}),e.jsx("button",{type:"reset",className:"hidden",ref:x,children:"reset"})]})]})})})]})}export{$ as default};
