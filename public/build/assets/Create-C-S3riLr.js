import{r as c,q as p,W as R,j as e,a as T,d as h}from"./app-DoPl5lFM.js";import{A as B}from"./AuthenticatedLayout-BAzWT1Pc.js";import{T as m}from"./TextInput-B2uDKCmh.js";import{I as n}from"./InputLabel-C-Tz_r5K.js";import"./Dropdown-C-i2qCtQ.js";import{P as f}from"./PrimaryButton-s6j7ElbD.js";import{I as o}from"./InputError-ByfgtF5w.js";import{A as D}from"./AlertMessage-CubBamYp.js";import{h as g}from"./moment-C5S46NFB.js";import{C as j}from"./Constants-Cwa85801.js";import"./SR-BoSPAYsv.js";import"./transition-YMyy0hwJ.js";function K({auth:_,sowingId:w,biomassesUrl:v}){const d=c.useRef(null),s=p().props.errors,t=p().props,{data:r,setData:i,post:N,patch:b,reset:y,processing:q}=R({sowing_id:w,quantity_of_fish:null,approximate_weight:null,approximate_height:null,manual_created_at:g().format(j.DATEFORMAT)}),[A,u]=c.useState("");c.useEffect(()=>{var a;(a=t==null?void 0:t.biomasse)!=null&&a.id&&C(t.biomasse)},[]);const C=a=>{i({sowing_id:a.sowing_id,quantity_of_fish:a.quantity_of_fish,approximate_weight:a.approximate_weight,approximate_height:a.approximate_height,manual_created_at:g(a.manual_created_at).format(j.DATEFORMAT)})},S=a=>{var l;a.preventDefault(),(l=t==null?void 0:t.biomasse)!=null&&l.id?b(t.formActionUrl,{onSuccess:()=>x()}):N(t.formActionUrl,{onSuccess:()=>x()})},x=()=>{var l;let a="modificada";(l=t==null?void 0:t.biomasse)!=null&&l.id||(y(),a="agregada"),u("La biomasa fue "+a+" satisfactoriamente"),d.current.click()};return e.jsxs(B,{user:_.user,children:[e.jsx(T,{title:"Biomasa"}),e.jsx("div",{className:"py-12",children:e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx(D,{title:A,onClose:()=>u("")}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex justify-between items-start flex-wrap gap-4 mb-4",children:e.jsx("div",{children:e.jsx("div",{className:"flex justify-between items-start flex-wrap gap-4 mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-1",children:[e.jsx(h,{href:"/sowings",className:"hover:text-gray-700",children:"Cultivo"}),e.jsx("span",{className:"mx-2",children:">"}),e.jsx("span",{className:"text-gray-700",children:"Agregar Biomasas"})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Nuevo Biomasas"})]})})})}),e.jsx(h,{className:"w-full sm:w-auto",href:v,children:e.jsx(f,{className:"",children:"Regresar"})})]}),e.jsx("br",{}),e.jsx("div",{class:"bg-white shadow-sm rounded-lg p-5",children:e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4 grid-cols-1 mb-4",children:[e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-2",children:[e.jsx(n,{value:"Peso aproximado (gr)"}),e.jsx(m,{type:"number",className:"w-full",placeholder:"",name:"approximate_weight",value:r.approximate_weight,required:!0,onChange:a=>i(a.target.name,a.target.value)}),s!=null&&s.approximate_weight?e.jsx(o,{message:s.approximate_weight}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-2",children:[e.jsx(n,{value:"TamaÃ±o aproximado (cm)"}),e.jsx(m,{type:"number",className:"w-full",placeholder:"",name:"approximate_height",value:r.approximate_height,required:!0,onChange:a=>i(a.target.name,a.target.value)}),s!=null&&s.approximate_height?e.jsx(o,{message:s.approximate_weight}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-2",children:[e.jsx(n,{value:"Cantidad de peces para la muestra"}),e.jsx(m,{type:"number",className:"w-full",placeholder:"",name:"quantity_of_fish",value:r.quantity_of_fish,required:!0,onChange:a=>i(a.target.name,a.target.value)}),s!=null&&s.quantity_of_fish?e.jsx(o,{message:s.quantity_of_fish}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-2",children:[e.jsx(n,{value:"Fecha de la muestra"}),e.jsx(m,{type:"date",className:"w-full",placeholder:"",name:"manual_created_at",value:r.manual_created_at,required:!0,onChange:a=>i(a.target.name,a.target.value)}),s!=null&&s.manual_created_at?e.jsx(o,{message:s.manual_created_at}):""]})]})}),e.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[e.jsx(f,{className:"bg-orange-600 w-full sm:w-auto text-white",disabled:q,children:"Guardar"}),e.jsx("button",{type:"reset",className:"hidden",ref:d,children:"reset"})]})]})})})]})}export{K as default};
