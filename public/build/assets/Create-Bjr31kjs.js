import{r as c,q as f,W as _,j as e,a as k,d as p}from"./app-DoPl5lFM.js";import{A as D}from"./AuthenticatedLayout-BAzWT1Pc.js";import{T as m}from"./TextInput-B2uDKCmh.js";import{I as r}from"./InputLabel-C-Tz_r5K.js";import{P as u}from"./PrimaryButton-s6j7ElbD.js";import{I as i}from"./InputError-ByfgtF5w.js";import{A as M}from"./AlertMessage-CubBamYp.js";import"./moment-C5S46NFB.js";import{C as R}from"./Checkbox-DRIDXa8j.js";import"./SR-BoSPAYsv.js";import"./Dropdown-C-i2qCtQ.js";import"./transition-YMyy0hwJ.js";function J({auth:b}){var g,h;const x=c.useRef(null),s=f().props.errors,a=f().props,[N,o]=c.useState(""),{data:l,setData:n,post:q,patch:y,reset:w,processing:C}=_({name:"",area:"",volume:"",entrance:"",exit:"",covered:0,mqtt_id:""});c.useEffect(()=>{var t;(t=a==null?void 0:a.pond)!=null&&t.id&&S(a.pond)},[]);const S=t=>{n({name:t.name,area:t.area,volume:t.volume,entrance:t.entrance,exit:t.exit,covered:t.covered,mqtt_id:t.mqtt_id})},I=t=>{var d;t.preventDefault(),(d=a==null?void 0:a.pond)!=null&&d.id?y(a.formActionUrl,{onSuccess:()=>j()}):q(a.formActionUrl,{onSuccess:()=>j()})},j=()=>{var d,v;let t=(d=a==null?void 0:a.pond)!=null&&d.id?"modificado":"agregado";(v=a==null?void 0:a.pond)!=null&&v.id||w(),o(`El estanque fue ${t} satisfactoriamente`),x.current.click()},A=()=>{window.confirm("¿Estás seguro de que deseas eliminar este estanque?")&&router.delete(route("pond.delete",{pondId:a.pond.id}))};return e.jsxs(D,{user:b.user,children:[e.jsx(k,{title:"Estanque"}),e.jsx("div",{className:"py-4 lg:py-12",children:e.jsx("form",{onSubmit:I,children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx(M,{title:N,onClose:()=>o("")}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex justify-between items-start flex-wrap gap-4 mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-1",children:[e.jsx(p,{href:"/ponds",className:"hover:text-gray-700",children:"Infraestructura"}),e.jsx("span",{className:"mx-2",children:">"}),e.jsx("span",{className:"text-gray-700",children:"Estanques"})]}),e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[(g=a==null?void 0:a.pond)!=null&&g.id?"Modificar":"Nuevo"," Estanque"]})]})}),e.jsx(p,{href:route("ponds"),children:e.jsx(u,{className:"bg-gray-800",children:"Regresar"})})]}),e.jsx("br",{}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg p-5",children:e.jsxs("div",{className:"grid md:grid-cols-2 sm:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Nombre del estanque"}),e.jsx(m,{type:"text",className:"w-full h-9 text-sm",name:"name",value:l.name,required:!0,onChange:t=>n(t.target.name,t.target.value)}),(s==null?void 0:s.name)&&e.jsx(i,{message:s.name})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Área (mt2)"}),e.jsx(m,{type:"number",className:"w-full h-9 text-sm",name:"area",value:l.area,required:!0,onChange:t=>n(t.target.name,t.target.value)}),(s==null?void 0:s.area)&&e.jsx(i,{message:s.area})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Volumen"}),e.jsx(m,{type:"number",className:"w-full h-9 text-sm",name:"volume",value:l.volume,required:!0,onChange:t=>n(t.target.name,t.target.value)}),(s==null?void 0:s.volume)&&e.jsx(i,{message:s.volume})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Caudal de entrada (L/s)"}),e.jsx(m,{type:"number",className:"w-full h-9 text-sm",name:"entrance",value:l.entrance,required:!0,onChange:t=>n(t.target.name,t.target.value)}),(s==null?void 0:s.entrance)&&e.jsx(i,{message:s.entrance})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Caudal de salida (L/s)"}),e.jsx(m,{type:"number",className:"w-full h-9 text-sm",name:"exit",value:l.exit,required:!0,onChange:t=>n(t.target.name,t.target.value)}),(s==null?void 0:s.exit)&&e.jsx(i,{message:s.exit})]}),e.jsxs("div",{children:[e.jsx(r,{value:"MQTT ID"}),e.jsx(m,{type:"text",className:"w-full h-9 text-sm",name:"mqtt_id",value:l.mqtt_id,required:!0,onChange:t=>n(t.target.name,t.target.value)}),(s==null?void 0:s.mqtt_id)&&e.jsx(i,{message:s.mqtt_id})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx(r,{value:"Cubierto"}),e.jsx(R,{name:"covered",checked:l.covered===1,style:{height:20,width:20},className:"cursor-pointer",onChange:t=>n(t.target.name,t.target.checked?1:0)}),(s==null?void 0:s.covered)&&e.jsx(i,{message:s.covered})]})]})]})}),e.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[e.jsx(u,{className:"bg-orange-600 w-full sm:w-auto text-white",disabled:C,children:"Guardar"}),e.jsx("button",{type:"reset",className:"hidden",ref:x,children:"reset"})]}),((h=a==null?void 0:a.pond)==null?void 0:h.id)&&e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-5 mt-6 border border-gray-300",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-800",children:"Eliminación"}),e.jsxs("p",{className:"mb-4 text-gray-600",children:["Se eliminará permanentemente el estanque “",e.jsx("strong",{children:a.pond.name}),"”. Verifica que sea la acción que quieres realizar."]}),e.jsx(u,{type:"button",onClick:A,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition duration-200",children:"Eliminar estanque"})]})]})})})]})}export{J as default};
