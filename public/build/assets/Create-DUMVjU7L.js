import{r as m,q as f,W as q,j as e,a as G,d as k}from"./app-DoPl5lFM.js";import{A as F}from"./AuthenticatedLayout-BAzWT1Pc.js";import{T as i}from"./TextInput-B2uDKCmh.js";import{I as n}from"./InputLabel-C-Tz_r5K.js";import{D as d}from"./Dropdown-C-i2qCtQ.js";import{D as O,a as U}from"./DropDownItem-BiquOykW.js";import{P as j}from"./PrimaryButton-s6j7ElbD.js";import{I as r}from"./InputError-ByfgtF5w.js";import{A as B}from"./AlertMessage-CubBamYp.js";import{h}from"./moment-C5S46NFB.js";import{C as v}from"./Constants-Cwa85801.js";import{T as L}from"./TextArea-BytP4p67.js";import"./SR-BoSPAYsv.js";import"./transition-YMyy0hwJ.js";function se({auth:w,expensesUrl:N,expenseCategories:y}){const u=m.useRef(null),a=f().props.errors,t=f().props,{data:c,setData:l,post:_,patch:b,reset:C,processing:D}=q({cost:null,category_id:null,concept:"",notes:"",manual_created_at:h().format(v.DATEFORMAT)}),[A,x]=m.useState(""),[T,p]=m.useState("Seleccionar");m.useEffect(()=>{var s;(s=t==null?void 0:t.expense)!=null&&s.id&&S(t.expense)},[]);const S=s=>{l({cost:s.cost,category_id:s.category_id,concept:s.concept,notes:s.notes,manual_created_at:h(s.manual_created_at).format(v.DATEFORMAT)}),p(s.category.name)},R=s=>{var o;s.preventDefault(),(o=t==null?void 0:t.expense)!=null&&o.id?b(t.formActionUrl,{onSuccess:()=>g()}):_(t.formActionUrl,{onSuccess:()=>g()})},g=()=>{var o;let s="modificado";(o=t==null?void 0:t.expense)!=null&&o.id||(C(),s="agregado"),x("El gasto fue "+s+" satisfactoriamente"),u.current.click()},I=()=>y.map(s=>e.jsx(U,{onClick:()=>{M(s)},children:s.name})),M=s=>{p(s.name),l({...c,category_id:s.id})};return e.jsxs(F,{user:w.user,children:[e.jsx(G,{title:"Gasto"}),e.jsx("div",{className:"py-4 lg:py-6 bg-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex justify-between items-start flex-wrap gap-4 mb-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Gastos"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Crear un Gasto"})]})})}),e.jsx("form",{onSubmit:R,children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx(B,{title:A,onClose:()=>x("")}),e.jsx("div",{class:"bg-white shadow-sm rounded-lg p-5",children:e.jsxs("div",{className:"grid md:grid-cols-4 sm:grid-cols-1 gap-4 xs:grid-cols-1 mb-4",children:[e.jsxs("div",{className:"md:col-span-2 sm:col-span-4",children:[e.jsx(n,{value:"Categoria"}),e.jsxs(d,{children:[e.jsx(d.Trigger,{children:e.jsx(O,{className:"items-center cursor-pointer",children:T})}),e.jsx(d.Content,{align:"left",className:"px-2",width:100,children:I()})]}),a!=null&&a.category_id?e.jsx(r,{message:a.category_id}):""]}),e.jsxs("div",{className:"w-full md:col-span-2 sm:col-span-4",children:[e.jsx(n,{value:"Concepto"}),e.jsx(i,{type:"text",className:"w-full",placeholder:"",name:"concept",value:c.concept,required:!0,onChange:s=>l(s.target.name,s.target.value)}),a!=null&&a.concept?e.jsx(r,{message:a.concept}):""]}),e.jsxs("div",{className:"w-full md:col-span-2 sm:col-span-4",children:[e.jsx(n,{value:"Valor"}),e.jsx(i,{type:"number",className:"w-full",placeholder:"$",name:"cost",value:c.cost,required:!0,onChange:s=>l(s.target.name,s.target.value)}),a!=null&&a.cost?e.jsx(r,{message:a.cost}):""]}),e.jsxs("div",{className:"w-full md:col-span-2 sm:col-span-4",children:[e.jsx(n,{value:"Fecha del gasto"}),e.jsx(i,{type:"date",className:"w-full",placeholder:"",name:"manual_created_at",value:c.manual_created_at,required:!0,onChange:s=>l(s.target.name,s.target.value)}),a!=null&&a.manual_created_at?e.jsx(r,{message:a.manual_created_at}):""]}),e.jsxs("div",{className:"w-full md:col-span-4 sm:col-span-4",children:[e.jsx(n,{value:"Notas"}),e.jsx(L,{className:"w-full",placeholder:"",name:"notes",value:c.notes,onChange:s=>l(s.target.name,s.target.value)}),a!=null&&a.notes?e.jsx(r,{message:a.notes}):""]})]})}),e.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[e.jsx(k,{className:"w-full sm:w-auto",href:N,children:e.jsx(j,{className:"gray bg-gray-800 w-full sm:w-auto text-white",children:"Regresar"})}),e.jsx(j,{className:"bg-orange-600 w-full sm:w-auto text-white",disabled:D,children:"Guardar"}),e.jsx("button",{type:"reset",className:"hidden",ref:u,children:"reset"})]})]})})]})})]})}export{se as default};
