import{q as x,r as p,j as e,a as f,d as h,y as g}from"./app-DoPl5lFM.js";import{A as j}from"./AuthenticatedLayout-BAzWT1Pc.js";import{P as v}from"./Pagination-BdAY7jD4.js";import b from"./Item-BQRENtQP.js";import{P as y}from"./PrimaryButton-s6j7ElbD.js";import{d as P}from"./Services-CsS_QnhK.js";import{S as n}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import"./SR-BoSPAYsv.js";import"./Dropdown-C-i2qCtQ.js";import"./transition-YMyy0hwJ.js";function T({auth:a,associations:o}){console.log("As",o);let d=x();p.useEffect(()=>{},[]);const c=t=>{const{name:r,id:s}=t;n.fire({title:"¿Estás seguro(a)?",text:`¿Deseas eliminar la unidad productiva "${r}"?`,showCancelButton:!0,confirmButtonColor:"#dd2627",cancelButtonColor:"#1f2937",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&l(s)})},l=async t=>{try{const r=await P(route("productive_unit.delete",{productiveUnitId:t}),d.props.csrfToken),s=await r.json();if(r.ok)n.fire({title:"Exito",text:s.msg,icon:"success",confirmButtonText:"Continuar"}).then(i=>{i.isConfirmed&&g.reload()});else throw new Error(s.msg||"Failed to delete user.")}catch(r){n.fire({title:"Error",text:r,icon:"error"})}},m=()=>o.data.map(t=>e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xl mb-2 font-bold",children:t.name}),e.jsx("div",{className:"grid grid-cols-4 border border-dashed border-gray-200 rounded-lg gap-4 p-1",children:u(t.productive_units)})]})),u=t=>t.map(r=>e.jsx(b,{productiveUnit:r,onDelete:c}));return e.jsxs(j,{user:a.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Unidades productivas"}),children:[e.jsx(f,{title:"Unidades productivas"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx("div",{className:"flex mb-4 justify-end",children:e.jsx(h,{href:route("productive_unit.create"),children:e.jsx(y,{className:"bg-orange-600 h-10",children:"Agregar"})})}),m(),e.jsx(v,{class:"mt-6",links:o.links})]})})]})}export{T as default};
