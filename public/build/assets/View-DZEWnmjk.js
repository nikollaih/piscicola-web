import{r as Fe,j as f,q as ze,a as He,d as We,y as qe}from"./app-DoPl5lFM.js";import{A as Ke}from"./AuthenticatedLayout-BAzWT1Pc.js";import $e from"./SowingInformation-Br1LrhBE.js";import{S as _e}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{d as Je}from"./Services-CsS_QnhK.js";import{C as De}from"./Constants-Cwa85801.js";import{E as xe,g as Ue,f as ne,h as Oe,j as C,s as D,T as Ee,k as B,l as Xe,r as G,n as ae,p as le,P as K,w as Qe,o as X,G as q,q as Ze,t as Ye,u as Me,v as ke,m as re,x as et,b as Ne,y as L,z as tt,F as Le,X as Ve,H as Se,I as st,J as it,R as at,c as Be,V as rt}from"./LineSeries-CBonYMjJ.js";import nt from"./ChartHistory-SxJRBYUy.js";import{h as lt}from"./moment-C5S46NFB.js";import ot from"./ButtonsGroup-BJXXHRv6.js";import{P as ut}from"./PrimaryButton-s6j7ElbD.js";import"./SR-BoSPAYsv.js";import"./Dropdown-C-i2qCtQ.js";import"./transition-YMyy0hwJ.js";import"./ActionsButton-CvIAJ4LF.js";class $ extends xe{_afterNew(){super._afterNewApplyThemes()}getFill(e){return{addColorStop:(t,s)=>{}}}_changed(){super._changed()}getBounds(e){const t=this.get("target");if(t){let s=t.globalBounds();const a=e.toLocal({x:s.left,y:s.top}),i=e.toLocal({x:s.right,y:s.top}),n=e.toLocal({x:s.right,y:s.bottom}),r=e.toLocal({x:s.left,y:s.bottom});return{left:Math.min(a.x,i.x,n.x,r.x),top:Math.min(a.y,i.y,n.y,r.y),right:Math.max(a.x,i.x,n.x,r.x),bottom:Math.max(a.y,i.y,n.y,r.y)}}return e._display.getLocalBounds()}}Object.defineProperty($,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Gradient"});Object.defineProperty($,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xe.classNames.concat([$.className])});class oe extends ${getFill(e){const t=this.get("rotation",0);let s=this.getBounds(e),a=s.left||0,i=s.right||0,n=s.top||0,r=s.bottom||0,l=C(t),d=D(t),o=l*(i-a),p=d*(r-n),c=Math.max(o,p);const g=this._root._renderer.createLinearGradient(a,n,a+c*l,n+c*d),y=this.get("stops");if(y){let v=0;Ue(y,P=>{let x=P.offset;ne(x)||(x=v/(y.length-1));let A=P.opacity;ne(A)||(A=1);let b=P.color;if(b){const w=P.lighten;w&&(b=Oe.lighten(b,w));const N=P.brighten;N&&(b=Oe.brighten(b,N)),g.addColorStop(x,"rgba("+b.r+","+b.g+","+b.b+","+A+")")}v++})}return g}}Object.defineProperty(oe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinearGradient"});Object.defineProperty(oe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:$.classNames.concat([oe.className])});class ue extends Ee{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText("",this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*B,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Object.defineProperty(ue,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialText"});Object.defineProperty(ue,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ee.classNames.concat([ue.className])});class J extends Xe{constructor(){super(...arguments),Object.defineProperty(this,"_flipped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(ue.new(this._root,{}))}baseRadius(){const e=this.getPrivate("radius",0),t=this.getPrivate("innerRadius",0),s=this.get("baseRadius",0);return t+G(s,e-t)}radius(){const e=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(e?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){const e=this.get("textType","adjusted"),t=this.get("inside",!1),s=this.get("orientation");let a=ae(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",t);const i=D(a),n=C(a);let r=this.baseRadius(),l=this.radius();if(this._display.angle=0,e=="circular")this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this._text.set("orientation",s),this._text.set("radius",l);else{r==0&&(a=0,l=0);let d=l*n,o=l*i;e=="radial"?(this.setRaw("x",d),this.setRaw("y",o),a<90||a>270||s!="auto"?(this._display.angle=a,this._flipped=!1):(this._display.angle=a+180,this._flipped=!0),this._dirty.rotation=!1):e=="adjusted"?(this.setRaw("centerX",le),this.setRaw("centerY",le),this.setRaw("x",d),this.setRaw("y",o)):e=="regular"&&(this.setRaw("x",d),this.setRaw("y",o))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){const e=this.get("textType","regular"),t=this.get("inside",!1);let s=0,a=0,i=this.get("labelAngle",0),n=this.localBounds(),r=n.right-n.left,l=n.bottom-n.top;if(e=="radial"){if(this._flipped){let d=this.get("centerX");d instanceof K&&(r=r*(1-d.value*2)),s=r*C(i),a=r*D(i)}}else!t&&e=="adjusted"&&(s=r/2*C(i),a=l/2*D(i));this.setRaw("dx",s),this.setRaw("dy",a),super._updatePosition()}get text(){return this._text}}Object.defineProperty(J,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialLabel"});Object.defineProperty(J,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Xe.classNames.concat([J.className])});const Ge=Math.abs,R=Math.atan2,V=Math.cos,ct=Math.max,Pe=Math.min,k=Math.sin,W=Math.sqrt,_=1e-12,U=Math.PI,ce=U/2,dt=2*U;function ht(u){return u>1?0:u<-1?U:Math.acos(u)}function Ie(u){return u>=1?ce:u<=-1?-ce:Math.asin(u)}function gt(u){return u.innerRadius}function ft(u){return u.outerRadius}function mt(u){return u.startAngle}function pt(u){return u.endAngle}function xt(u){return u&&u.padAngle}function bt(u,e,t,s,a,i,n,r){var l=t-u,d=s-e,o=n-a,p=r-i,c=p*l-o*d;if(!(c*c<_))return c=(o*(e-i)-p*(u-a))/c,[u+c*l,e+c*d]}function ie(u,e,t,s,a,i,n){var r=u-t,l=e-s,d=(n?i:-i)/W(r*r+l*l),o=d*l,p=-d*r,c=u+o,g=e+p,y=t+o,v=s+p,P=(c+y)/2,x=(g+v)/2,A=y-c,b=v-g,w=A*A+b*b,N=a-i,O=c*v-y*g,I=(b<0?-1:1)*W(ct(0,N*N*w-O*O)),F=(O*b-A*I)/w,E=(-O*A-b*I)/w,M=(O*b+A*I)/w,T=(-O*A+b*I)/w,j=F-P,h=E-x,m=M-P,Y=T-x;return j*j+h*h>m*m+Y*Y&&(F=M,E=T),{cx:F,cy:E,x01:-o,y01:-p,x11:F*(a/N-1),y11:E*(a/N-1)}}function Te(){var u=gt,e=ft,t=X(0),s=null,a=mt,i=pt,n=xt,r=null,l=Qe(d);function d(){var o,p,c=+u.apply(this,arguments),g=+e.apply(this,arguments),y=a.apply(this,arguments)-ce,v=i.apply(this,arguments)-ce,P=Ge(v-y),x=v>y;if(r||(r=o=l()),g<c&&(p=g,g=c,c=p),!(g>_))r.moveTo(0,0);else if(P>dt-_)r.moveTo(g*V(y),g*k(y)),r.arc(0,0,g,y,v,!x),c>_&&(r.moveTo(c*V(v),c*k(v)),r.arc(0,0,c,v,y,x));else{var A=y,b=v,w=y,N=v,O=P,I=P,F=n.apply(this,arguments)/2,E=F>_&&(s?+s.apply(this,arguments):W(c*c+g*g)),M=Pe(Ge(g-c)/2,+t.apply(this,arguments)),T=M,j=M,h,m;if(E>_){var Y=Ie(E/c*k(F)),Q=Ie(E/g*k(F));(O-=Y*2)>_?(Y*=x?1:-1,w+=Y,N-=Y):(O=0,w=N=(y+v)/2),(I-=Q*2)>_?(Q*=x?1:-1,A+=Q,b-=Q):(I=0,A=b=(y+v)/2)}var z=g*V(A),H=g*k(A),Z=c*V(N),ee=c*k(N);if(M>_){var te=g*V(b),se=g*k(b),be=c*V(w),ye=c*k(w),S;if(P<U)if(S=bt(z,H,be,ye,te,se,Z,ee)){var ve=z-S[0],Ae=H-S[1],Re=te-S[0],we=se-S[1],je=1/k(ht((ve*Re+Ae*we)/(W(ve*ve+Ae*Ae)*W(Re*Re+we*we)))/2),Ce=W(S[0]*S[0]+S[1]*S[1]);T=Pe(M,(c-Ce)/(je-1)),j=Pe(M,(g-Ce)/(je+1))}else T=j=0}I>_?j>_?(h=ie(be,ye,z,H,g,j,x),m=ie(te,se,Z,ee,g,j,x),r.moveTo(h.cx+h.x01,h.cy+h.y01),j<M?r.arc(h.cx,h.cy,j,R(h.y01,h.x01),R(m.y01,m.x01),!x):(r.arc(h.cx,h.cy,j,R(h.y01,h.x01),R(h.y11,h.x11),!x),r.arc(0,0,g,R(h.cy+h.y11,h.cx+h.x11),R(m.cy+m.y11,m.cx+m.x11),!x),r.arc(m.cx,m.cy,j,R(m.y11,m.x11),R(m.y01,m.x01),!x))):(r.moveTo(z,H),r.arc(0,0,g,A,b,!x)):r.moveTo(z,H),!(c>_)||!(O>_)?r.lineTo(Z,ee):T>_?(h=ie(Z,ee,te,se,c,-T,x),m=ie(z,H,be,ye,c,-T,x),r.lineTo(h.cx+h.x01,h.cy+h.y01),T<M?r.arc(h.cx,h.cy,T,R(h.y01,h.x01),R(m.y01,m.x01),!x):(r.arc(h.cx,h.cy,T,R(h.y01,h.x01),R(h.y11,h.x11),!x),r.arc(0,0,c,R(h.cy+h.y11,h.cx+h.x11),R(m.cy+m.y11,m.cx+m.x11),x),r.arc(m.cx,m.cy,T,R(m.y11,m.x11),R(m.y01,m.x01),!x))):r.arc(0,0,c,N,w,x)}if(r.closePath(),o)return r=null,o+""||null}return d.centroid=function(){var o=(+u.apply(this,arguments)+ +e.apply(this,arguments))/2,p=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-U/2;return[V(p)*o,k(p)*o]},d.innerRadius=function(o){return arguments.length?(u=typeof o=="function"?o:X(+o),d):u},d.outerRadius=function(o){return arguments.length?(e=typeof o=="function"?o:X(+o),d):e},d.cornerRadius=function(o){return arguments.length?(t=typeof o=="function"?o:X(+o),d):t},d.padRadius=function(o){return arguments.length?(s=o==null?null:typeof o=="function"?o:X(+o),d):s},d.startAngle=function(o){return arguments.length?(a=typeof o=="function"?o:X(+o),d):a},d.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:X(+o),d):i},d.padAngle=function(o){return arguments.length?(n=typeof o=="function"?o:X(+o),d):n},d.context=function(o){return arguments.length?(r=o??null,d):r},d}class de extends q{constructor(){super(...arguments),Object.defineProperty(this,"ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"iy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_generator",{enumerable:!0,configurable:!0,writable:!0,value:Te()})}_getTooltipPoint(){let e=this.get("tooltipX"),t=this.get("tooltipY"),s=0,a=0;ne(e)&&(s=e),ne(t)&&(a=t);let i=this.get("radius",0),n=this.get("innerRadius",0),r=this.get("dRadius",0),l=this.get("dInnerRadius",0);return i+=r,n+=l,n<0&&(n=i+n),e instanceof K&&(s=this.ix*(n+(i-n)*e.value)),t instanceof K&&(a=this.iy*(n+(i-n)*t.value)),this.get("arc")>=360&&n==0&&(s=0,a=0),{x:s,y:a}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius")||this.isDirty("shiftRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let e=this.get("startAngle",0),t=this.get("arc",0);const s=this._generator;t<0&&(e=e+t,t=t*-1),t>.1&&s.cornerRadius(this.get("cornerRadius",0)),s.context(this._display);let a=this.get("radius",0),i=this.get("innerRadius",0),n=this.get("dRadius",0),r=this.get("dInnerRadius",0);a+=n,i+=r,i<0&&(i=a+i),s({innerRadius:i,outerRadius:a,startAngle:(e+90)*B,endAngle:(e+t+90)*B});let l=e+t/2;this.ix=C(l),this.iy=D(l);const d=this.get("shiftRadius",0);this.setRaw("dx",this.ix*d),this.setRaw("dy",this.iy*d),this.markDirtyPosition()}}}Object.defineProperty(de,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slice"});Object.defineProperty(de,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:q.classNames.concat([de.className])});class he extends xe{constructor(){super(...arguments),Object.defineProperty(this,"axis",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged();const e=this.get("sprite");if(this.isDirty("sprite")&&e&&(e.setAll({position:"absolute",role:"figure"}),this._disposers.push(e)),this.isDirty("location")){const t=e.dataItem;this.axis&&e&&t&&this.axis._prepareDataItem(t)}}dispose(){const e=this.axis;e&&Ze(e._bullets,(t,s)=>{s.uid==this.uid&&delete e._bullets[t]}),super.dispose()}}Object.defineProperty(he,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisBullet"});Object.defineProperty(he,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xe.classNames.concat([he.className])});class ge extends J{constructor(){super(...arguments),Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisLabelRadial"});Object.defineProperty(ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:J.classNames.concat([ge.className])});class fe extends Ye{constructor(){super(...arguments),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new Me(ke.new({}),()=>ge._new(this._root,{themeTags:re(this.labels.template.get("themeTags",[]),this.get("themeTags",[]))},[this.labels.template]))}),Object.defineProperty(this,"axisFills",{enumerable:!0,configurable:!0,writable:!0,value:new Me(ke.new({}),()=>de._new(this._root,{themeTags:re(this.axisFills.template.get("themeTags",["fill"]),this.get("themeTags",[]))},[this.axisFills.template]))}),Object.defineProperty(this,"_fillGenerator",{enumerable:!0,configurable:!0,writable:!0,value:Te()})}_afterNew(){this._settings.themeTags=re(this._settings.themeTags,["renderer","circular"]),super._afterNew(),this.setPrivateRaw("letter","X"),this.setRaw("position","absolute")}_changed(){super._changed(),(this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("endAngle"))&&this.updateLayout()}processAxis(){super.processAxis(),this.axis.labelsContainer.set("isMeasured",!1)}updateLayout(){const e=this.chart;if(e){const t=e.getPrivate("radius",0);let s=G(this.get("radius",et),t);s<0&&(s=t+s),this.setPrivate("radius",s);let a=G(this.get("innerRadius",e.getPrivate("innerRadius",0)),t)*e.getPrivate("irModifyer",1);a<0&&(a=s+a),this.setPrivate("innerRadius",a);let i=this.get("startAngle",e.get("startAngle",-90)),n=this.get("endAngle",e.get("endAngle",270));this.setPrivate("startAngle",i),this.setPrivate("endAngle",n),this.set("draw",r=>{const l=this.positionToPoint(0);r.moveTo(l.x,l.y),i>n&&([i,n]=[n,i]),r.arc(0,0,s,i*B,n*B)}),this.axis.markDirtySize()}}updateGrid(e,t,s){if(e){t==null&&(t=0);let a=e.get("location",.5);s!=null&&s!=t&&(t=t+(s-t)*a);let i=this.getPrivate("radius",0),n=this.getPrivate("innerRadius",0),r=this.positionToAngle(t);this.toggleVisibility(e,t,0,1),i!=null&&e.set("draw",l=>{l.moveTo(n*C(r),n*D(r)),l.lineTo(i*C(r),i*D(r))})}}positionToAngle(e){const t=this.axis,s=this.getPrivate("startAngle",0),a=this.getPrivate("endAngle",360),i=t.get("start",0),n=t.get("end",1);let r=(a-s)/(n-i),l;return this.get("inversed")?l=s+(n-e)*r:l=s+(e-i)*r,l}_handleOpposite(){}positionToPoint(e){const t=this.getPrivate("radius",0),s=this.positionToAngle(e);return{x:t*C(s),y:t*D(s)}}updateLabel(e,t,s,a){if(e){t==null&&(t=0);let i=.5;a!=null&&a>1?i=e.get("multiLocation",i):i=e.get("location",i),s!=null&&s!=t&&(t=t+(s-t)*i);const n=this.getPrivate("radius",0),r=this.getPrivate("innerRadius",0),l=this.positionToAngle(t);e.setPrivate("radius",n),e.setPrivate("innerRadius",r),e.set("labelAngle",l),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}fillDrawMethod(e,t,s){e.set("draw",a=>{t==null&&(t=this.getPrivate("startAngle",0)),s==null&&(s=this.getPrivate("endAngle",0));const i=this.getPrivate("innerRadius",0),n=this.getPrivate("radius",0);this._fillGenerator.context(a),this._fillGenerator({innerRadius:i,outerRadius:n,startAngle:(t+90)*B,endAngle:(s+90)*B})})}updateTick(e,t,s,a){if(e){t==null&&(t=0);let i=.5;a!=null&&a>1?i=e.get("multiLocation",i):i=e.get("location",i),s!=null&&s!=t&&(t=t+(s-t)*i);let n=e.get("length",0);e.get("inside")&&(n*=-1);let l=this.getPrivate("radius",0),d=this.positionToAngle(t);this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1)),l!=null&&e.set("draw",o=>{o.moveTo(l*C(d),l*D(d)),l+=n,o.lineTo(l*C(d),l*D(d))})}}updateBullet(e,t,s){if(e){const a=e.get("sprite");if(a){t==null&&(t=0);let i=e.get("location",.5);s!=null&&s!=t&&(t=t+(s-t)*i);let n=this.getPrivate("radius",0),r=this.positionToAngle(t);this.toggleVisibility(a,t,0,1),a.setAll({rotation:r,x:n*C(r),y:n*D(r)})}}}updateFill(e,t,s){if(e){t==null&&(t=0),s==null&&(s=1);let a=this.fitAngle(this.positionToAngle(t)),i=this.fitAngle(this.positionToAngle(s));e.setAll({startAngle:a,arc:i-a}),e._setSoft("innerRadius",this.getPrivate("innerRadius")),e._setSoft("radius",this.getPrivate("radius"))}}fitAngle(e){const t=this.getPrivate("startAngle",0),s=this.getPrivate("endAngle",0),a=Math.min(t,s),i=Math.max(t,s);return e<a&&(e=a),e>i&&(e=i),e}axisLength(){return Math.abs(this.getPrivate("radius",0)*Math.PI*2*(this.getPrivate("endAngle",360)-this.getPrivate("startAngle",0))/360)}positionTooltip(e,t){let s=this.getPrivate("radius",0);const a=this.positionToAngle(t);this._positionTooltip(e,{x:s*C(a),y:s*D(a)})}updateTooltipBounds(e){}}Object.defineProperty(fe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererCircular"});Object.defineProperty(fe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ye.classNames.concat([fe.className])});class me extends Ne{constructor(){super(...arguments),Object.defineProperty(this,"hand",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(q.new(this._root,{themeTags:["hand"]}))}),Object.defineProperty(this,"pin",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(q.new(this._root,{themeTags:["pin"]}))})}_afterNew(){this._settings.themeTags=re(this._settings.themeTags,["clock"]),super._afterNew(),this.set("width",L(1)),this.adapters.add("x",()=>0),this.adapters.add("y",()=>0),this.pin.set("draw",(e,t)=>{const s=t.parent;if(s){const a=s.dataItem;if(a){const i=a.component;if(i){const n=i.chart;if(n){const r=n.getPrivate("radius",0);let l=G(s.get("pinRadius",0),r);l<0&&(l=r+l),e.moveTo(l,0),e.arc(0,0,l,0,360)}}}}}),this.hand.set("draw",(e,t)=>{const s=t.parent;if(s){let a=s.parent;a&&a.set("width",L(1));const i=s.dataItem;if(i){const n=i.component;if(n){const r=n.chart;if(r){const l=s.get("bottomWidth",10)/2,d=s.get("topWidth",0)/2,o=r.getPrivate("radius",0);let p=G(s.get("radius",0),o);p<0&&(p=o+p);let c=s.get("innerRadius",0);c instanceof K?c=G(c,o):c<0&&c<0&&(c=p+c),e.moveTo(c,-l),e.lineTo(p,-d),e.lineTo(p,d),e.lineTo(c,l),e.lineTo(c,-l)}}}}})}_prepareChildren(){super._prepareChildren(),this.hand._markDirtyKey("fill"),this.pin._markDirtyKey("fill")}}Object.defineProperty(me,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ClockHand"});Object.defineProperty(me,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ne.classNames.concat([me.className])});class yt extends tt{setupDefaultRules(){super.setupDefaultRules();const e=this.rule.bind(this),t=this._root.interfaceColors;e("RadarChart").setAll({radius:L(80),innerRadius:0,startAngle:-90,endAngle:270}),e("RadarColumnSeries").setAll({clustered:!0}),e("Slice",["radar","column","series"]).setAll({width:L(80),height:L(80)}),e("RadarLineSeries").setAll({connectEnds:!0}),e("SmoothedRadarLineSeries").setAll({tension:.5}),e("AxisRendererRadial").setAll({minGridDistance:40,axisAngle:-90,inversed:!1,cellStartLocation:0,cellEndLocation:1}),e("AxisRendererCircular").setAll({minGridDistance:100,inversed:!1,cellStartLocation:0,cellEndLocation:1}),e("RadialLabel",["circular"]).setAll({textType:"circular",paddingTop:1,paddingRight:0,paddingBottom:1,paddingLeft:0,centerX:0,centerY:0,radius:8}),e("AxisLabelRadial",["category"]).setAll({text:"{category}",populateText:!0}),e("RadialLabel",["radial"]).setAll({textType:"regular",centerX:0,textAlign:"right"}),e("RadarChart",["gauge"]).setAll({startAngle:180,endAngle:360,innerRadius:L(90)}),e("ClockHand").setAll({topWidth:1,bottomWidth:10,radius:L(90),pinRadius:10});{const s=e("Graphics",["clock","hand"]);s.setAll({fillOpacity:1}),Le(s,"fill",t,"alternativeBackground")}{const s=e("Graphics",["clock","pin"]);s.setAll({fillOpacity:1}),Le(s,"fill",t,"alternativeBackground")}}}class pe extends Ve{constructor(){super(...arguments),Object.defineProperty(this,"radarContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(Ne.new(this._root,{x:le,y:le}))}),Object.defineProperty(this,"_arcGenerator",{enumerable:!0,configurable:!0,writable:!0,value:Te()}),Object.defineProperty(this,"_maxRadius",{enumerable:!0,configurable:!0,writable:!0,value:1})}_afterNew(){this._defaultThemes.push(yt.new(this._root)),super._afterNew();const e=this.radarContainer,t=this.gridContainer,s=this.topGridContainer,a=this.seriesContainer,i=this.bulletsContainer;e.children.pushAll([t,a,s,i]),a.set("mask",q.new(this._root,{})),t.set("mask",q.new(this._root,{})),this._disposers.push(this.plotContainer.events.on("boundschanged",()=>{this._updateRadius()}))}_maskGrid(){}_prepareChildren(){if(super._prepareChildren(),this._sizeDirty||this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("endAngle")){const e=this.chartContainer,t=e.innerWidth(),s=e.innerHeight(),a=this.get("startAngle",0),i=this.get("endAngle",0),n=this.get("innerRadius");let r=Se(0,0,a,i,1);const l=t/(r.right-r.left),d=s/(r.bottom-r.top);let o={left:0,right:0,top:0,bottom:0};if(n instanceof K){let c=n.value,g=Math.min(l,d);c=Math.max(g*c,g-Math.min(s,t))/g,o=Se(0,0,a,i,c),this.setPrivateRaw("irModifyer",c/n.value)}r=st([r,o]),this._maxRadius=Math.max(0,Math.min(l,d));const p=G(this.get("radius",0),this._maxRadius);this.radarContainer.setAll({dy:-p*(r.bottom+r.top)/2,dx:-p*(r.right+r.left)/2}),this._updateRadius()}}_addCursor(e){this.radarContainer.children.push(e)}_updateRadius(){const e=G(this.get("radius",L(80)),this._maxRadius);this.setPrivateRaw("radius",e);let t=G(this.get("innerRadius",0),e);t<0&&(t=e+t),this.setPrivateRaw("innerRadius",t),this.xAxes.each(a=>{a.get("renderer").updateLayout()}),this.yAxes.each(a=>{a.get("renderer").updateLayout()}),this._updateMask(this.seriesContainer,t,e),this._updateMask(this.gridContainer,t,e),this.series.each(a=>{a.get("maskBullets")?this._updateMask(a.bulletsContainer,t,e):a.bulletsContainer.remove("mask")});const s=this.get("cursor");s&&s.updateLayout()}_updateMask(e,t,s){const a=e.get("mask");a&&a.set("draw",i=>{this._arcGenerator.context(i),this._arcGenerator({innerRadius:t,outerRadius:s+.5,startAngle:(this.get("startAngle",0)+90)*B,endAngle:(this.get("endAngle",0)+90)*B})})}processAxis(e){this.radarContainer.children.push(e)}inPlot(e,t,s){const a=Math.hypot(e.x,e.y),i=ae(Math.atan2(e.y,e.x)*it);let n=ae(this.get("startAngle",0)),r=ae(this.get("endAngle",0)),l=!1;return n<r&&n<i&&i<r&&(l=!0),n>r&&(i>n&&(l=!0),i<r&&(l=!0)),n==r&&(l=!0),l?(t==null&&(t=this.getPrivate("radius",0)),s==null&&(s=this.getPrivate("innerRadius",0)),s>t&&([s,t]=[t,s]),a<=t+.5&&a>=s-.5):!1}_tooltipToLocal(e){return this.radarContainer._display.toLocal(e)}_handlePinch(){}}Object.defineProperty(pe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadarChart"});Object.defineProperty(pe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ve.classNames.concat([pe.className])});const vt="/build/assets/alarm-CEw5YG9I.gif";function At({stat:u}){Fe.useEffect(()=>{a()},[]);const e=()=>{let i=parseFloat(u.value),n=parseFloat(u.step_stat.value_maximun);return i>n?i:n},t=()=>{let i=parseFloat(u.value),n=parseFloat(u.step_stat.value_minimun);return i<n?i:n},s=()=>{let i=parseFloat(u.value),n=parseFloat(u.step_stat.value_maximun),r=parseFloat(u.step_stat.value_minimun);return i<r||i>n?De.COLORS.DANGER:De.COLORS.SUCCESS},a=()=>{let i=at.new(u.id),n=i.container.children.push(pe.new(i,{startAngle:-180,endAngle:0,radius:L(95),innerRadius:-20})),r=fe.new(i,{innerRadius:-10,strokeOpacity:1,strokeWidth:15,strokeGradient:oe.new(i,{rotation:0,stops:[{color:Be(s())},{color:Be(s())}]})}),l=n.xAxes.push(rt.new(i,{min:t(),max:e(),renderer:r})),d=l.makeDataItem({value:parseFloat(u.value)});d.set("bullet",he.new(i,{sprite:me.new(i,{radius:L(95)})})),l.createAxisRange(d)};return f.jsxs("div",{className:"bg-white col-span-1 rounded-lg shadow-md mb-4 p-2 relative",children:[u.triggered_alarm?f.jsx("img",{src:vt,className:"absolute left-3 top-3",style:{width:40,height:40}}):null,f.jsx("p",{className:"font-bold text-center mb-2",children:u.step_stat.name}),f.jsx("div",{id:u.id,className:"w-full",style:{height:200}}),f.jsxs("div",{className:"flex justify-between mt-4",children:[f.jsxs("div",{className:"text-center flex-1",children:[f.jsx("p",{className:"text-gray-700",children:"Min"}),f.jsx("p",{className:"font-bold",children:parseFloat(u.step_stat.value_minimun)})]}),f.jsx("div",{className:"text-center flex-1",children:f.jsx("h2",{className:"font-bold text-xl",children:parseFloat(u.value).toFixed(1)})}),f.jsxs("div",{className:"text-center flex-1",children:[f.jsx("p",{className:"text-gray-700",children:"Max"}),f.jsx("p",{className:"font-bold",children:parseFloat(u.step_stat.value_maximun)})]})]})]})}function Gt({auth:u,sowing:e,statsReadings:t,biomasses:s,ponds:a,sowings:i}){var p;const n=ze(),[r]=Fe.useState(t),l=c=>{_e.fire({title:"¿Estás seguro(a)?",text:"¿Deseas eliminar la cosecha?",showCancelButton:!0,confirmButtonColor:"#dd2627",cancelButtonColor:"#1f2937",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(g=>{g.isConfirmed&&d(c)})},d=async c=>{try{const g=await Je(route("sowing.delete",{sowingId:c}),n.props.csrfToken),y=await g.json();if(g.ok)_e.fire({title:"Éxito",text:y.msg,icon:"success",confirmButtonText:"Continuar"}).then(v=>{v.isConfirmed&&qe.visit(route("sowings"))});else throw new Error(y.msg||"Falló la eliminación.")}catch(g){_e.fire({title:"Error",text:g.message||"Ocurrió un error inesperado.",icon:"error"})}},o=()=>r.map(c=>f.jsx(At,{stat:c},c.id));return f.jsxs(Ke,{user:u.user,children:[f.jsx(He,{title:"Cosecha"}),f.jsx("div",{className:"py-4 lg:py-6 bg-gray-100",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[f.jsx("div",{className:"pb-5",children:f.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-4 mb-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-500",children:"Cultivos"}),f.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:(p=e.pond)==null?void 0:p.name})]}),f.jsx(We,{href:route("sowing.edit",{sowingId:e.id}),children:f.jsx(ut,{className:"bg-gray-800",children:"Configuración"})})]})}),f.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-4",children:f.jsx($e,{sowing:e})}),f.jsx(ot,{sowing:e,onDelete:l}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 sm:gap-4 mb-4",children:f.jsx("div",{className:"bg-white rounded-lg p-2 shadow-md col-span-full",children:f.jsx(nt,{biomasses:s.data})})}),f.jsxs("p",{className:"font-bold text-xl text-center",children:["Lectura de parámetros"," ",f.jsx("span",{onClick:()=>location.reload(),className:"text-orange-600 cursor-pointer",children:"(Actualizar)"})]}),f.jsxs("p",{className:"mb-4 text-center",children:["Última actualización: ",lt().format("YYYY-MM-DD - hh:mm a")]}),f.jsx("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-4",children:o()})]})})]})}export{Gt as default};
