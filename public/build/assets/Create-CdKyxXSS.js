import{r as o,q as b,W as E,j as e,a as F,d as N,y as H}from"./app-DoPl5lFM.js";import{A as J}from"./AuthenticatedLayout-BAzWT1Pc.js";import{T as m}from"./TextInput-B2uDKCmh.js";import{T as K}from"./TextArea-BytP4p67.js";import{I as r}from"./InputLabel-C-Tz_r5K.js";import{D as c}from"./Dropdown-C-i2qCtQ.js";import{D as w,a as A}from"./DropDownItem-BiquOykW.js";import{P as u}from"./PrimaryButton-s6j7ElbD.js";import{I as d}from"./InputError-ByfgtF5w.js";import{A as O}from"./AlertMessage-CubBamYp.js";import"./moment-C5S46NFB.js";import"./SR-BoSPAYsv.js";import"./transition-YMyy0hwJ.js";function le({auth:T,ponds:q,actuatorTypes:D,goBackRoute:S}){var f,_,y;const x=o.useRef(null),a=b().props.errors,s=b().props,{data:n,setData:i,post:C,patch:I,reset:M,processing:R}=E({pond_id:null,name:"",actuator_type_id:null,description:"",cost_by_minute:"",mqtt_id:""}),[k,j]=o.useState(""),[U,p]=o.useState("Seleccionar"),[z,g]=o.useState("Seleccionar");o.useEffect(()=>{var t;(t=s==null?void 0:s.actuator)!=null&&t.id&&B(s.actuator)},[]);const B=t=>{i({pond_id:t.pond_id,name:t.name,actuator_type_id:t.actuator_type_id,description:t.description,cost_by_minute:t.cost_by_minute,mqtt_id:t.mqtt_id}),g(t.actuator_type.name),p(t.pond.name)},G=t=>{var l;t.preventDefault(),(l=s==null?void 0:s.actuator)!=null&&l.id?I(s.formActionUrl,{onSuccess:()=>h()}):C(s.formActionUrl,{onSuccess:()=>h()})},h=()=>{var l,v;let t=(l=s==null?void 0:s.actuator)!=null&&l.id?"modificado":"agregado";(v=s==null?void 0:s.actuator)!=null&&v.id||M(),j(`El actuador fue ${t} satisfactoriamente`),x.current.click()},L=()=>{window.confirm("¿Estás seguro de que deseas eliminar este actuador?")&&H.delete(route("actuator.delete",{actuatorId:s.actuator.id}))},Q=()=>q.data.map(t=>e.jsx(A,{onClick:()=>V(t),children:t.name},t.id)),V=t=>{p(t.name),i({...n,pond_id:t.id})},W=()=>D.map(t=>e.jsx(A,{onClick:()=>$(t),children:t.name},t.id)),$=t=>{g(t.name),i({...n,actuator_type_id:t.id})};return e.jsxs(J,{user:T.user,children:[e.jsx(F,{title:"Actuador"}),e.jsx("div",{className:"lg:py-12 py-4",children:e.jsx("form",{onSubmit:G,children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx(O,{title:k,onClose:()=>j("")}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex justify-between items-start flex-wrap gap-4 mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-1",children:[e.jsx(N,{href:"/actuators/pond",className:"hover:text-gray-700",children:"Infraestructura"}),e.jsx("span",{className:"mx-2",children:">"}),e.jsx("span",{className:"text-gray-700",children:(f=s==null?void 0:s.actuator)!=null&&f.id?"Editar Actuador":"Agregar Actuador"})]}),e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[(_=s==null?void 0:s.actuator)!=null&&_.id?"Editar":"Nuevo"," Actuador"]})]})}),e.jsx(N,{className:"w-full sm:w-auto",href:S,children:e.jsx(u,{className:"bg-gray-800",children:"Regresar"})})]}),e.jsx("br",{}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg p-5",children:e.jsxs("div",{className:"grid grid-cols-1",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 col-span-1 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Nombre"}),e.jsx(m,{type:"text",className:"w-full",name:"name",value:n.name,required:!0,onChange:t=>i(t.target.name,t.target.value)}),(a==null?void 0:a.name)&&e.jsx(d,{message:a.name})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Costo por minuto"}),e.jsx(m,{type:"number",className:"w-full",name:"cost_by_minute",value:n.cost_by_minute,required:!0,onChange:t=>i(t.target.name,t.target.value)}),(a==null?void 0:a.cost_by_minute)&&e.jsx(d,{message:a.cost_by_minute})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 col-span-1 mb-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:"Estanque"}),e.jsxs(c,{children:[e.jsx(c.Trigger,{children:e.jsx(w,{className:"items-center cursor-pointer",children:U})}),e.jsx(c.Content,{align:"left",className:"px-2",width:100,children:Q()})]}),(a==null?void 0:a.pond_id)&&e.jsx(d,{message:a.pond_id})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Tipo de actuador"}),e.jsxs(c,{children:[e.jsx(c.Trigger,{children:e.jsx(w,{className:"items-center cursor-pointer",children:z})}),e.jsx(c.Content,{align:"left",className:"px-2",width:100,children:W()})]}),(a==null?void 0:a.actuator_type_id)&&e.jsx(d,{message:a.actuator_type_id})]}),e.jsxs("div",{children:[e.jsx(r,{value:"MQTT ID"}),e.jsx(m,{type:"text",className:"w-full",name:"mqtt_id",value:n.mqtt_id,required:!0,onChange:t=>i(t.target.name,t.target.value)}),(a==null?void 0:a.mqtt_id)&&e.jsx(d,{message:a.mqtt_id})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:"Descripción"}),e.jsx(K,{className:"w-full",name:"description",value:n.description,onChange:t=>i(t.target.name,t.target.value)}),(a==null?void 0:a.description)&&e.jsx(d,{message:a.description})]})]})}),e.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[e.jsx(u,{className:"bg-orange-600 w-full sm:w-auto text-white",disabled:R,children:"Guardar"}),e.jsx("button",{type:"reset",className:"hidden",ref:x,children:"reset"})]}),((y=s==null?void 0:s.actuator)==null?void 0:y.id)&&e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-5 mt-6 border border-gray-300",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-800",children:"Eliminación"}),e.jsxs("p",{className:"mb-4 text-gray-600",children:["Se eliminará permanentemente el actuador “",e.jsx("strong",{children:s.actuator.name}),"”. Verifica que sea la acción que quieres realizar."]}),e.jsx(u,{type:"button",onClick:L,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition duration-200",children:"Eliminar actuador"})]})]})})})]})}export{le as default};
