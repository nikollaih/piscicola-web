import{r as u,q as g,W as C,j as e,a as T,d as R}from"./app-DoPl5lFM.js";import{A as I}from"./AuthenticatedLayout-BAzWT1Pc.js";import{T as o}from"./TextInput-B2uDKCmh.js";import{T as M}from"./TextArea-BytP4p67.js";import{I as i}from"./InputLabel-C-Tz_r5K.js";import{P as h}from"./PrimaryButton-s6j7ElbD.js";import{I as m}from"./InputError-ByfgtF5w.js";import{A as D}from"./AlertMessage-CubBamYp.js";import{h as j}from"./moment-C5S46NFB.js";import{C as v}from"./Constants-Cwa85801.js";import"./SR-BoSPAYsv.js";import"./Dropdown-C-i2qCtQ.js";import"./transition-YMyy0hwJ.js";function K({auth:y,supply:n}){var f;const d=u.useRef(null),s=g().props.errors,t=g().props,{data:c,setData:l,post:w,patch:N,reset:_,processing:b}=C({supply_id:n.id,quantity:null,name:"",price:"",manual_created_at:j().format(v.DATEFORMAT)}),[A,p]=u.useState("");u.useEffect(()=>{var a;(a=t==null?void 0:t.supplyPurchase)!=null&&a.id&&q(t.supplyPurchase)},[]);const q=a=>{l({price:a.price,quantity:a.quantity,notes:a.notes,manual_created_at:j(a.manual_created_at).format(v.DATEFORMAT)})},S=a=>{var r;a.preventDefault(),(r=t==null?void 0:t.supplyPurchase)!=null&&r.id?N(t.formActionUrl,{onSuccess:()=>x()}):w(t.formActionUrl,{onSuccess:()=>x()})},x=()=>{var r;let a="modificado";(r=t==null?void 0:t.supplyPurchase)!=null&&r.id||(_(),a="agregado"),p("El suministro fue "+a+" satisfactoriamente"),d.current.click()};return e.jsxs(I,{user:y.user,header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:[(f=t==null?void 0:t.supplyPurchase)!=null&&f.id?"Modificar":"Agregar"," compra de suministro (",n.name,")"]}),children:[e.jsx(T,{title:n.name}),e.jsx("div",{className:"py-4 lg:py-12",children:e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx(D,{title:A,onClose:()=>p("")}),e.jsx("div",{class:"bg-white shadow-sm rounded-lg p-5",children:e.jsxs("div",{className:"grid md:grid-cols-3 sm:grid-cols-1 gap-4 xs:grid-cols-1 mb-4",children:[e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-4",children:[e.jsx(i,{value:"Cantidad"}),e.jsx(o,{type:"number",className:"w-full",placeholder:"",name:"quantity",value:c.quantity,required:!0,onChange:a=>l(a.target.name,a.target.value)}),s!=null&&s.quantity?e.jsx(m,{message:s.quantity}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-4",children:[e.jsx(i,{value:"Precio"}),e.jsx(o,{type:"number",className:"w-full",placeholder:"",name:"price",value:c.price,required:!0,onChange:a=>l(a.target.name,a.target.value)}),s!=null&&s.price?e.jsx(m,{message:s.price}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-4",children:[e.jsx(i,{value:"Fecha de compra"}),e.jsx(o,{type:"date",className:"w-full",placeholder:"",name:"manual_created_at",value:c.manual_created_at,required:!0,onChange:a=>l(a.target.name,a.target.value)}),s!=null&&s.manual_created_at?e.jsx(m,{message:s.manual_created_at}):""]}),e.jsxs("div",{className:"w-full md:col-span-3 sm:col-span-4",children:[e.jsx(i,{value:"Notas"}),e.jsx(M,{className:"w-full",placeholder:"",name:"notes",value:c.notes,onChange:a=>l(a.target.name,a.target.value)}),s!=null&&s.notes?e.jsx(m,{message:s.notes}):""]})]})}),e.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[e.jsx(R,{className:"w-full sm:w-auto",href:route("supply.view",{supplyId:n.id}),children:e.jsx(h,{className:"gray bg-gray-800 w-full sm:w-auto",children:"Regresar"})}),e.jsx(h,{className:"bg-orange-600 w-full sm:w-auto",disabled:b,children:"Guardar"}),e.jsx("button",{type:"reset",className:"hidden",ref:d,children:"reset"})]})]})})})]})}export{K as default};
