import{r as d,q as p,W as S,j as e,a as R,d as f}from"./app-DoPl5lFM.js";import{A as T}from"./AuthenticatedLayout-BAzWT1Pc.js";import{T as m}from"./TextInput-B2uDKCmh.js";import{I as n}from"./InputLabel-C-Tz_r5K.js";import{P as j}from"./PrimaryButton-s6j7ElbD.js";import{I as c}from"./InputError-ByfgtF5w.js";import{A as D}from"./AlertMessage-CubBamYp.js";import{h}from"./moment-C5S46NFB.js";import{C as g}from"./Constants-Cwa85801.js";import"./SR-BoSPAYsv.js";import"./Dropdown-C-i2qCtQ.js";import"./transition-YMyy0hwJ.js";function J({auth:v,biomasseId:y,mortalitiesUrl:N}){const o=d.useRef(null),s=p().props.errors,t=p().props,[_,u]=d.useState(""),{data:i,setData:r,post:b,patch:w,reset:A,processing:q}=S({biomasse_id:y,sample_quantity:"",dead:"",manual_created_at:h().format(g.DATEFORMAT)});d.useEffect(()=>{var a;(a=t==null?void 0:t.mortality)!=null&&a.id&&C(t.mortality)},[]);const C=a=>{r({sample_quantity:a.sample_quantity,dead:a.dead,manual_created_at:h(a.manual_created_at).format(g.DATEFORMAT)})},M=a=>{var l;a.preventDefault(),(l=t==null?void 0:t.mortality)!=null&&l.id?w(t.formActionUrl,{onSuccess:()=>x()}):b(t.formActionUrl,{onSuccess:()=>x()})},x=()=>{var l;let a="modificada";(l=t==null?void 0:t.mortality)!=null&&l.id||(A(),a="agregada"),u("La mortalidad fue "+a+" satisfactoriamente"),o.current.click()};return e.jsxs(T,{user:v.user,children:[e.jsx(R,{title:"Mortalidad"}),e.jsx("div",{className:"py-12",children:e.jsx("form",{onSubmit:M,children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx(D,{title:_,onClose:()=>u("")}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex justify-between items-start flex-wrap gap-4 mb-4",children:e.jsx("div",{children:e.jsx("div",{className:"flex justify-between items-start flex-wrap gap-4 mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-1",children:[e.jsx(f,{href:"/sowings",className:"hover:text-gray-700",children:"Cultivo"}),e.jsx("span",{className:"mx-2",children:">"}),e.jsx("span",{className:"text-gray-700",children:"Agregar Mortalidad"})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Nueva Mortalidad"})]})})})}),e.jsx(f,{className:"w-full sm:w-auto",href:N,children:e.jsx(j,{className:"",children:"Regresar"})})]}),e.jsx("br",{}),e.jsx("div",{class:"bg-white shadow-sm rounded-lg p-5",children:e.jsxs("div",{className:"grid md:grid-cols-3 sm:grid-cols-1 gap-4 xs:grid-cols-1 mb-4",children:[e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-4",children:[e.jsx(n,{value:"Cantidad de peces para la muestra"}),e.jsx(m,{type:"number",className:"w-full",placeholder:"",name:"sample_quantity",value:i.sample_quantity,required:!0,onChange:a=>r(a.target.name,a.target.value)}),s!=null&&s.sample_quantity?e.jsx(c,{message:s.sample_quantity}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-4",children:[e.jsx(n,{value:"Cantidad de peces muertos"}),e.jsx(m,{type:"number",className:"w-full",placeholder:"",name:"dead",value:i.dead,required:!0,onChange:a=>r(a.target.name,a.target.value)}),s!=null&&s.dead?e.jsx(c,{message:s.dead}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-4",children:[e.jsx(n,{value:"Fecha de la muestra"}),e.jsx(m,{type:"date",className:"w-full",placeholder:"",name:"manual_created_at",value:i.manual_created_at,required:!0,onChange:a=>r(a.target.name,a.target.value)}),s!=null&&s.manual_created_at?e.jsx(c,{message:s.manual_created_at}):""]})]})}),e.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[e.jsx(j,{className:"bg-orange-600 w-full sm:w-auto text-white",disabled:q,children:"Guardar"}),e.jsx("button",{type:"reset",className:"hidden",ref:o,children:"reset"})]})]})})})]})}export{J as default};
