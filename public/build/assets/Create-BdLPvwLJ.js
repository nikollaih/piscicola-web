import{r as o,q as f,W as P,j as e,a as V,d as B}from"./app-DoPl5lFM.js";import{A as G}from"./AuthenticatedLayout-BAzWT1Pc.js";import{T as c}from"./TextInput-B2uDKCmh.js";import{I as m}from"./InputLabel-C-Tz_r5K.js";import{D as t}from"./Dropdown-C-i2qCtQ.js";import{D as K,a as L}from"./DropDownItem-BiquOykW.js";import{P as v}from"./PrimaryButton-s6j7ElbD.js";import{I as r}from"./InputError-ByfgtF5w.js";import{A as W}from"./AlertMessage-CubBamYp.js";import"./moment-C5S46NFB.js";import"./TextArea-BytP4p67.js";import"./SR-BoSPAYsv.js";import"./transition-YMyy0hwJ.js";function ee({auth:h,steps:x,stepId:u,step_stat:l}){const g=o.useRef(null),s=f().props.errors,N=f().props,{data:i,setData:n,post:y,patch:S,reset:b,processing:w}=P({step_id:null,name:"",key:"",value_minimun:"",value_maximun:""}),[D,p]=o.useState(""),[k,d]=o.useState("Seleccionar");o.useEffect(()=>{u&&!(l!=null&&l.id)&&C(u),l!=null&&l.id&&T(N.step_stat)},[]);const C=a=>{let R=x.filter(M=>M.id==a)[0].name;n({...i,step_id:a}),d(R)},T=a=>{n({step_id:a.step_id,name:a.name,key:a.key,value_minimun:a.value_minimun,value_maximun:a.value_maximun}),d(a.step.name)},A=a=>{a.preventDefault(),l!=null&&l.id?S(route("step_stat.update",{stepStatId:l.id}),{onSuccess:()=>j()}):y(route("step_stat.store"),{onSuccess:()=>j()})},j=()=>{let a="modificado";l!=null&&l.id||(b(),a="agregado"),p("El parámetro fue "+a+" satisfactoriamente"),g.current.click()},q=()=>x.map(a=>e.jsx(L,{onClick:()=>{I(a)},children:a.name})),I=a=>{d(a.name),n({...i,step_id:a.id})};return e.jsxs(G,{user:h.user,header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:[l!=null&&l.id?"Modificar":"Agregar"," parámetro"]}),children:[e.jsx(V,{title:"Parámetro"}),e.jsx("div",{className:"py-12",children:e.jsx("form",{onSubmit:A,children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx(W,{title:D,onClose:()=>p("")}),e.jsxs("div",{class:"bg-white shadow-sm rounded-lg p-5",children:[e.jsxs("div",{className:"grid md:grid-cols-3 sm:grid-cols-1 gap-4 xs:grid-cols-1 mb-4",children:[e.jsxs("div",{className:"md:col-span-1 sm:col-span-3",children:[e.jsx(m,{value:"Etapa"}),e.jsxs(t,{children:[e.jsx(t.Trigger,{children:e.jsx(K,{className:"items-center cursor-pointer",children:k})}),e.jsx(t.Content,{align:"left",className:"px-2",width:100,children:q()})]}),s!=null&&s.step_id?e.jsx(r,{message:s.step_id}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-3",children:[e.jsx(m,{value:"Nombre"}),e.jsx(c,{type:"text",className:"w-full",placeholder:"",name:"name",value:i.name,required:!0,onChange:a=>n(a.target.name,a.target.value)}),s!=null&&s.name?e.jsx(r,{message:s.name}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-3",children:[e.jsx(m,{value:"Key"}),e.jsx(c,{type:"text",className:"w-full",placeholder:"",name:"key",value:i.key,required:!0,onChange:a=>n(a.target.name,a.target.value)}),s!=null&&s.key?e.jsx(r,{message:s.key}):""]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 sm:grid-cols-1 gap-4 xs:grid-cols-1 mb-4",children:[e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-2",children:[e.jsx(m,{value:"Valor minimo"}),e.jsx(c,{type:"number",className:"w-full",placeholder:"",name:"value_minimun",value:i.value_minimun,required:!0,onChange:a=>n(a.target.name,a.target.value)}),s!=null&&s.value_minimun?e.jsx(r,{message:s.value_minimun}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-2",children:[e.jsx(m,{value:"Valor maximo"}),e.jsx(c,{type:"number",className:"w-full",placeholder:"",name:"value_maximun",value:i.value_maximun,required:!0,onChange:a=>n(a.target.name,a.target.value)}),s!=null&&s.value_maximun?e.jsx(r,{message:s.value_maximun}):""]})]})]}),e.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[e.jsx(B,{href:route("step_stats",{stepId:u}),children:e.jsx(v,{className:"gray bg-gray-800",children:"Regresar"})}),e.jsx(v,{className:"bg-orange-600",disabled:w,children:"Guardar"}),e.jsx("button",{type:"reset",className:"hidden",ref:g,children:"reset"})]})]})})})]})}export{ee as default};
