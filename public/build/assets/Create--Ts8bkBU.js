import{r as d,q as h,W as I,j as e,a as M,d as R}from"./app-DoPl5lFM.js";import{A as U}from"./AuthenticatedLayout-BAzWT1Pc.js";import{T as o}from"./TextInput-B2uDKCmh.js";import{I as i}from"./InputLabel-C-Tz_r5K.js";import{D as r}from"./Dropdown-C-i2qCtQ.js";import{D as k,a as L}from"./DropDownItem-BiquOykW.js";import{P as f}from"./PrimaryButton-s6j7ElbD.js";import{I as m}from"./InputError-ByfgtF5w.js";import{A as B}from"./AlertMessage-CubBamYp.js";import"./SR-BoSPAYsv.js";import"./transition-YMyy0hwJ.js";function Z({auth:v,productive_unit:G,associations:N}){var j;const u=d.useRef(null),a=h().props.errors,t=h().props,{data:n,setData:l,post:b,patch:_,reset:w,processing:D}=I({association_id:null,name:"",email:"",mobile_phone:"",phone:"",address:"",mqtt_id:""}),[y,p]=d.useState(""),[A,x]=d.useState("Seleccionar");d.useEffect(()=>{var s;(s=t==null?void 0:t.productive_unit)!=null&&s.id&&q(t.productive_unit)},[]);const q=s=>{l({association_id:s.association_id,name:s.name,email:s.email,mobile_phone:s.mobile_phone,phone:s.phone,address:s.address,mqtt_id:s.mqtt_id}),x(s.association.name)},C=s=>{var c;s.preventDefault(),(c=t==null?void 0:t.productive_unit)!=null&&c.id?_(t.formActionUrl,{onSuccess:()=>g()}):b(t.formActionUrl,{onSuccess:()=>g()})},g=()=>{var c;let s="modificada";(c=t==null?void 0:t.productive_unit)!=null&&c.id||(w(),s="agregada"),p("La unidad productiva fue "+s+" satisfactoriamente"),u.current.click()},S=()=>N.map(s=>e.jsx(L,{onClick:()=>{T(s)},children:s.name})),T=s=>{x(s.name),l({...n,association_id:s.id})};return e.jsxs(U,{user:v.user,header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:[(j=t==null?void 0:t.productive_unit)!=null&&j.id?"Modificar":"Agregar"," unidad productiva"]}),children:[e.jsx(M,{title:"Asociación"}),e.jsx("div",{className:"py-12",children:e.jsx("form",{onSubmit:C,children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx(B,{title:y,onClose:()=>p("")}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg p-5 mb-6",children:e.jsxs("div",{className:"grid md:grid-cols-3 sm:grid-cols-1 gap-4 xs:grid-cols-1 mb-4",children:[e.jsxs("div",{className:"md:col-span-1 sm:col-span-4",children:[e.jsx(i,{value:"Asociación"}),e.jsxs(r,{children:[e.jsx(r.Trigger,{children:e.jsx(k,{className:"items-center cursor-pointer",children:A})}),e.jsx(r.Content,{align:"left",className:"px-2",width:100,children:S()})]}),a!=null&&a.measurement_unit_id?e.jsx(m,{message:a.measurement_unit_id}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-3",children:[e.jsx(i,{value:"Nombre"}),e.jsx(o,{type:"text",className:"w-full",placeholder:"",name:"name",value:n.name,required:!0,onChange:s=>l(s.target.name,s.target.value)}),a!=null&&a.name?e.jsx(m,{message:a.name}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-3",children:[e.jsx(i,{value:"Celular"}),e.jsx(o,{type:"number",className:"w-full",placeholder:"",name:"mobile_phone",value:n.mobile_phone,required:!0,onChange:s=>l(s.target.name,s.target.value)}),a!=null&&a.mobile_phone?e.jsx(m,{message:a.mobile_phone}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-3",children:[e.jsx(i,{value:"Teléfono"}),e.jsx(o,{type:"number",className:"w-full",placeholder:"",name:"phone",value:n.phone,onChange:s=>l(s.target.name,s.target.value)}),a!=null&&a.phone?e.jsx(m,{message:a.phone}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-3",children:[e.jsx(i,{value:"Correo electrónico"}),e.jsx(o,{type:"email",className:"w-full",placeholder:"",name:"email",value:n.email,required:!0,onChange:s=>l(s.target.name,s.target.value)}),a!=null&&a.email?e.jsx(m,{message:a.email}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-3",children:[e.jsx(i,{value:"MQTT ID"}),e.jsx(o,{type:"text",className:"w-full",placeholder:"",name:"mqtt_id",value:n.mqtt_id,onChange:s=>l(s.target.name,s.target.value)}),a!=null&&a.mqtt_id?e.jsx(m,{message:a.mqtt_id}):""]}),e.jsxs("div",{className:"w-full md:col-span-3 sm:col-span-3",children:[e.jsx(i,{value:"Dirección"}),e.jsx(o,{type:"text",className:"w-full",placeholder:"",name:"address",value:n.address,required:!0,onChange:s=>l(s.target.name,s.target.value)}),a!=null&&a.address?e.jsx(m,{message:a.address}):""]})]})}),e.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[e.jsx(R,{href:route("productive_units"),children:e.jsx(f,{className:"gray bg-gray-800",children:"Regresar"})}),e.jsx(f,{className:"bg-orange-600",disabled:D,children:"Guardar"}),e.jsx("button",{type:"reset",className:"hidden",ref:u,children:"reset"})]})]})})})]})}export{Z as default};
