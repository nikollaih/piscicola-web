import{q as y,r as o,W as l,j as e,y as N}from"./app-DoPl5lFM.js";import{T as c}from"./TextInput-B2uDKCmh.js";import{I as u}from"./InputLabel-C-Tz_r5K.js";import{I as p}from"./InputError-ByfgtF5w.js";import{P as f}from"./PrimaryButton-s6j7ElbD.js";import{h as x}from"./moment-C5S46NFB.js";function I({formActionUrl:g,formActionDeleteUrl:h,automation:s,actuator:j,onSuccess:r}){const{errors:i}=y().props,d=o.useRef(null),t=l({start_time:"",end_time:"",automationType:"time"}),m=l({valor:"off"});o.useEffect(()=>{s!=null&&s.id&&t.setData({start_time:s.start_time,end_time:s.end_time,automationType:"time"})},[s]);const _=a=>{a.preventDefault(),t.post(g,{onSuccess:()=>{r()}})},b=()=>{N.post(h,{...m.data,automationType:"time"},{onSuccess:()=>{r(),m.reset(),d.current.click()}})},n=()=>x(t.data.end_time,"HH:mm").diff(x(t.data.start_time,"HH:mm"),"minutes"),v=()=>Number(n())*j.cost_by_minute;return e.jsx("form",{onSubmit:_,children:e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-5",children:[e.jsx("h4",{className:"font-semibold",children:"Automatización por tiempo"}),e.jsx("p",{className:"mb-4",children:"El actuador será encendido y apagado automáticamente todos los días a estas horas."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(u,{value:"Hora de encendido"}),e.jsx(c,{type:"time",name:"start_time",className:"w-full",value:t.data.start_time,required:!0,onChange:a=>t.setData("start_time",a.target.value)}),e.jsx(p,{message:i.start_time})]}),e.jsxs("div",{children:[e.jsx(u,{value:"Hora de apagado"}),e.jsx(c,{type:"time",name:"end_time",className:"w-full",value:t.data.end_time,required:!0,onChange:a=>t.setData("end_time",a.target.value)}),e.jsx(p,{message:i.end_time})]})]}),t.data.start_time&&t.data.end_time&&e.jsx("span",{children:`Nota: El actuador estará activo durante ${n()} minutos diarios, lo que supone un costo de aproximadamente $${v().toLocaleString("es-CO")}.`}),e.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[(s==null?void 0:s.id)&&e.jsx(f,{type:"button",className:"bg-red-500",onClick:b,children:"Eliminar configuración"}),e.jsx(f,{className:"bg-orange-600",children:"Guardar"}),e.jsx("button",{type:"reset",className:"hidden",ref:d,children:"reset"})]})]})})}export{I as default};
