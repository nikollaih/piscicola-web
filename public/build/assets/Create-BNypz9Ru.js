import{r as i,q as f,W as E,j as e,a as O,d as j}from"./app-DoPl5lFM.js";import{A as U}from"./AuthenticatedLayout-BAzWT1Pc.js";import{T as h}from"./TextInput-B2uDKCmh.js";import{I as c}from"./InputLabel-C-Tz_r5K.js";import{D as m}from"./Dropdown-C-i2qCtQ.js";import{D as G,a as L}from"./DropDownItem-BiquOykW.js";import{P as g}from"./PrimaryButton-s6j7ElbD.js";import{I as o}from"./InputError-ByfgtF5w.js";import{A as W}from"./AlertMessage-CubBamYp.js";import{h as y}from"./moment-C5S46NFB.js";import{C as _}from"./Constants-Cwa85801.js";import"./SR-BoSPAYsv.js";import"./transition-YMyy0hwJ.js";function te({auth:v,sowingId:w,biomasseId:N,supplies:b,indexRoute:S,buttonText:D,titleh2:q}){const d=i.useRef(null),a=f().props.errors,t=f().props,{data:r,setData:n,post:A,patch:C,reset:T,processing:R}=E({sowing_id:w,biomasse_id:N,supply_id:null,quantity:null,manual_created_at:y().format(_.DATEFORMAT)}),[I,u]=i.useState(""),[$,p]=i.useState("Seleccionar");i.useEffect(()=>{var s;(s=t==null?void 0:t.feed)!=null&&s.id&&M(t.feed)},[]);const M=s=>{n({quantity:s.quantity,supply_id:s.supply_id,manual_created_at:y(s.manual_created_at).format(_.DATEFORMAT)}),p(`${s.supply.name} - ${s.supply.available_quantity}${s.supply.measurement_unit.name}`)},k=s=>{var l;s.preventDefault(),(l=t==null?void 0:t.feed)!=null&&l.id?C(t.formActionUrl,{onSuccess:()=>x()}):A(t.formActionUrl,{onSuccess:()=>x()})},x=()=>{var l;let s="modificada";(l=t==null?void 0:t.feed)!=null&&l.id||(T(),s="agregada"),u("El suministro fue "+s+" satisfactoriamente"),d.current.click()},B=()=>b.map(s=>e.jsxs(L,{onClick:()=>{F(s)},children:[s.name," - ",s.available_quantity,s.measurement_unit.name]})),F=s=>{p(`${s.name} - ${s.available_quantity}${s.measurement_unit.name}`),n({...r,supply_id:s.id})};return e.jsxs(U,{user:v.user,children:[e.jsx(O,{title:"Biomasa"}),e.jsx("div",{className:"py-12",children:e.jsx("form",{onSubmit:k,children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-4 lg:px-4",children:[e.jsx(W,{title:I,onClose:()=>u("")}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex justify-between items-start flex-wrap gap-4 mb-4",children:e.jsx("div",{children:e.jsx("div",{className:"flex justify-between items-start flex-wrap gap-4 mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-1",children:[e.jsx(j,{href:"/sowings",className:"hover:text-gray-700",children:"Cultivo"}),e.jsx("span",{className:"mx-2",children:">"}),e.jsx("span",{className:"text-gray-700",children:q})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:D})]})})})}),e.jsx(j,{className:"w-full sm:w-auto",href:S,children:e.jsx(g,{className:"",children:"Regresar"})})]}),e.jsx("br",{}),e.jsx("div",{class:"bg-white shadow-sm rounded-lg p-5",children:e.jsxs("div",{className:"grid md:grid-cols-3 sm:grid-cols-1 gap-4 xs:grid-cols-1 mb-4",children:[e.jsxs("div",{className:"md:col-span-1 sm:col-span-4",children:[e.jsx(c,{value:"Producto"}),e.jsxs(m,{children:[e.jsx(m.Trigger,{children:e.jsx(G,{className:"items-center cursor-pointer",children:$})}),e.jsx(m.Content,{align:"left",className:"px-2",width:100,children:B()})]}),a!=null&&a.supply_id?e.jsx(o,{message:a.supply_id}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-4",children:[e.jsx(c,{value:"Cantidad"}),e.jsx(h,{type:"number",className:"w-full",placeholder:"",name:"quantity",value:r.quantity,required:!0,onChange:s=>n(s.target.name,s.target.value)}),a!=null&&a.quantity?e.jsx(o,{message:a.quantity}):""]}),e.jsxs("div",{className:"w-full md:col-span-1 sm:col-span-4",children:[e.jsx(c,{value:"Fecha de alimentaciÃ³n"}),e.jsx(h,{type:"date",className:"w-full",placeholder:"",name:"manual_created_at",value:r.manual_created_at,required:!0,onChange:s=>n(s.target.name,s.target.value)}),a!=null&&a.manual_created_at?e.jsx(o,{message:a.manual_created_at}):""]})]})}),e.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[e.jsx(g,{className:"bg-orange-600 w-full sm:w-auto text-white",disabled:R,children:"Guardar"}),e.jsx("button",{type:"reset",className:"hidden",ref:d,children:"reset"})]})]})})})]})}export{te as default};
